{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Fooody Buddy</title>
{% endblock meta %}

{% block navbar %}

{% endblock navbar %}

{% block content %}
<head>
  <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg navbar-light py-lg-0 px-lg-5 wow fadeIn" data-wow-delay="0.1s">
      <a href="{% url 'homepage:show_homepage' %}" class="navbar-brand ms-4 ms-lg-0">
        <h1 class="fw-bold m-0" style="color: #FF8300;">F<span class="text-secondary">ooo</span>dy</h1>
      </a>
      <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-4 p-lg-0">
          <a href="{% url 'homepage:show_homepage' %}" class="nav-item nav-link">Home</a>
          <a href="{% url 'miniquiz:quiz_main_page' %}" class="nav-item nav-link">Mini Quiz</a>
          
          {% if user.is_authenticated %}
          <a href="{% url 'homepage:logout' %}" class="nav-item nav-link">Logout</a>
          {% else %} 
          <a href="{% url 'homepage:login' %}" class="nav-item nav-link">Login</a>               
          {% endif %}

        </div>
      </div>
    </nav>
    <!-- Navbar End -->

</head>
<body>

  <!-- Carousel Start -->
  <div class="container-fluid p-0 mb-5 wow fadeIn" data-wow-delay="0.1s">
    <div id="header-carousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="w-100" src="{% static 'img/carousel-1.jpg' %}" alt="Image">
                <div class="carousel-caption">
                    <div class="container">
                        <div class="row justify-content-start">
                            <div class="col-lg-7">
                                <h1 class="display-2 mb-5 animated slideInDown">Fooody Buddy</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img class="w-100" src="{% static 'img/carousel-2.jpg' %}" alt="Image">
                <div class="carousel-caption">
                    <div class="container">
                        <div class="row justify-content-start">
                            <div class="col-lg-7">
                                <h5 class="animated slideInDown">Fooody Buddy hadir sebagai solusi untuk memfasilitasi masyarakat dalam menyalurkan limbah makanan yang diproduksi. Tak hanya itu, kami juga menginisiasi langkah preventif dengan membuat fitur tracker kedaluwarsa makanan. Melalui digitalisasi, kami berharap aplikasi ini dapat meningkatkan kesadaran masyarakat terkait pentingnya pengelolaan food waste.</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#header-carousel"
        data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#header-carousel"
        data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
  </div>
  <!-- Carousel End -->

  <!-- FAQ Start -->
  <div class="container-xxl py-5">
      <div class="container">
          <div class="section-header text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
              <h1 class="display-5 mb-3">Frequently Asked Questions (FAQ)</h1>
          </div>
          <div class="row g-4">
              <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                  <div class="bg-light p-4">
                      <h3 class="d-block h5 lh-base mb-4">Question 1</h3>
                      <p>Tempor ut dolore lorem kasd vero ipsum sit eirmod sit. Ipsum diam justo sed rebum vero dolor duo.</p>
                  </div>
              </div>
              <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                  <div class="bg-light p-4">
                    <h3 class="d-block h5 lh-base mb-4">Question 2</h3>
                    <p>Tempor ut dolore lorem kasd vero ipsum sit eirmod sit. Ipsum diam justo sed rebum vero dolor duo.</p>
                  </div>
              </div>
              <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                <div class="bg-light p-4">
                    <h3 class="d-block h5 lh-base mb-4">Question 3</h3>
                    <p>Tempor ut dolore lorem kasd vero ipsum sit eirmod sit. Ipsum diam justo sed rebum vero dolor duo.</p>
                </div>
              </div>
              <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.7s">
                  <div class="bg-light p-4">
                    <h3 class="d-block h5 lh-base mb-4">Question 4</h3>
                    <p>Tempor ut dolore lorem kasd vero ipsum sit eirmod sit. Ipsum diam justo sed rebum vero dolor duo.</p>
                  </div>
              </div>
              <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.9s">
                <div class="bg-light p-4">
                  <h3 class="d-block h5 lh-base mb-4">Question 5</h3>
                  <p>Tempor ut dolore lorem kasd vero ipsum sit eirmod sit. Ipsum diam justo sed rebum vero dolor duo.</p>
                </div>
              </div>
              <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.11s">
                <div class="bg-light p-4">
                  <h3 class="d-block h5 lh-base mb-4">Question 6</h3>
                  <p>Tempor ut dolore lorem kasd vero ipsum sit eirmod sit. Ipsum diam justo sed rebum vero dolor duo.</p>
                </div>
              </div>
          </div>
      </div>
  </div>
  <!-- FAQ End -->

  <!-- Contack Form Start -->
  <div class="container-xxl py-5">
    <div class="row">
      <div class="col-lg-12">
        <div class="section-header text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
          <h1 class="display-5 mb-3">Kirim pesan untuk kami</h1>
          <p>Kami menghargai semua masukkan untuk Fooody Buddy :)</p>
          {% if user.is_authenticated %}
          <button type="button" class="btn" style="background-color: #FEA150" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">Contact Us</button>
          {% else %}
          <button type="button" class="btn" style="background-color: #FEA150"><a href="{% url 'homepage:login' %}" style="color: #000000; text-decoration: none;">Contact Us</a></button>
          {% endif %}
        </div>
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Contact Form</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form id="form-control" action="" method="POST">
                  {% csrf_token %}
                  <div class="mb-3">
                    <label for="name" class="col-form-label">Nama:</label>
                    {{form.name}}
                  </div>
                  <div class="mb-3">
                    <label for="email" class="col-form-label">Email:</label>
                    {{form.email}}
                  </div>
                  <div class="mb-3">
                    <label for="message" class="col-form-label">Pesan:</label>
                    {{form.message}}
                  </div>
                  <button type="submit" class="btn" id="submit" data-bs-dismiss="modal">Submit</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Contack Form End -->

  <!-- Footer Start -->
  <div class="container-fluid bg-dark footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container-fluid copyright">
          <div class="container">
              <div class="row">
                  <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                      &copy; <a href="#">Kelompok A02</a>, All Right Reserved.
                  </div>
                  <div class="col-md-6 text-center text-md-end">
                      <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                      Template Designed By <a href="https://htmlcodex.com">HTML Codex</a>
                      <br>Distributed By: <a href="https://themewagon.com" target="_blank">ThemeWagon</a>
                  </div>
              </div>
          </div>
      </div>
  </div>
  <!-- Footer End -->

  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    $(document).on('submit', '#form-control', function(e) {
        e.preventDefault();
        var form = $("#form-control");
        console.log("sinisini")

        $.ajax({
            url:"{% url 'homepage:show_homepage' %}",
            type: 'POST',
            data: form.serialize(),
            dataType: 'json',
            header: {'X-CSRFToken': '{% csrf_token %}'},
            success: function(response) {
              console.log("sini")
                var success = response['success']
                if(success){
                  console.log("woysini")
                    Swal.fire({
                        icon: 'success',
                        title: 'Pesan sudah diterima',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#FEA150',
                    })
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Input tidak valid :(',
                        text: 'Mohon isi kembali input anda',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#FEA150',
                    })
                }
                document.getElementById("form-control").reset();
            },
            error: function(response) {
                Swal.fire({
                        icon: 'error',
                        title: 'Terjadi error, mohon refresh halaman dan kirim ulang pesan!',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#0b36a8',
                })
                document.getElementById("form-control").reset();
            }
        })
    })
  </script>
</body>
{% endblock content %}